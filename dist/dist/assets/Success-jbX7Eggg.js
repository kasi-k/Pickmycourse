import{r as l,b as e,A as t,j as o}from"./index-uakTF4_L.js";const d=()=>{l.useState(!1);const[g,u]=l.useState({}),[S,i]=l.useState(!0);l.useEffect(()=>{m()},[]);async function m(){if(localStorage.getItem("method")==="stripe"){const a={subscriberId:localStorage.getItem("stripe"),uid:localStorage.getItem("user"),plan:localStorage.getItem("plan")},r=t+"/api/stripedetails";await e.post(r,a).then(n=>{u(n.data),localStorage.setItem("type",localStorage.getItem("plan")),i(!1)});const s={subscriberId:localStorage.getItem("stripe"),subscription:g.customer.id||"id not found",user:localStorage.getItem("user"),plan:localStorage.getItem("plan"),method:"stripe",fname:localStorage.getItem("fname"),lname:localStorage.getItem("lname"),email:localStorage.getItem("email"),phone:localStorage.getItem("phone"),amount:localStorage.getItem("amount"),course:localStorage.getItem("coursecount"),tax:localStorage.getItem("tax")},c=await e.post(`${t}/api/usersubscription`,s);if(console.log(c.data),c.status===200){const n={user:localStorage.getItem("user"),count:localStorage.getItem("coursecount")},p=await e.post(`${t}/api/countplan`,n);console.log(p.data),localStorage.removeItem("amount"),localStorage.removeItem("coursecount"),localStorage.removeItem("stripe"),localStorage.removeItem("method"),localStorage.removeItem("plan")}}else try{if(localStorage.getItem("method")==="razorpay"){const a={subscriberId:localStorage.getItem("razorpay"),subscription:localStorage.getItem("subscription"),user:localStorage.getItem("user"),plan:localStorage.getItem("plan"),method:"razorpay",fname:localStorage.getItem("fname"),lname:localStorage.getItem("lname"),email:localStorage.getItem("email"),phone:localStorage.getItem("phone"),amount:localStorage.getItem("amount"),course:localStorage.getItem("coursecount"),tax:localStorage.getItem("tax")},r=await e.post(`${t}/api/usersubscription`,a);if(console.log(r.data,"sucsess"),r.status===200){const s={user:localStorage.getItem("user"),count:localStorage.getItem("coursecount")},c=await e.post(`${t}/api/countplan`,s);localStorage.removeItem("amount"),localStorage.removeItem("coursecount"),localStorage.removeItem("razorpay"),localStorage.removeItem("method"),localStorage.removeItem("plan"),localStorage.removeItem("subscription")}}}catch{m()}}return o.jsxs("div",{className:"font-poppins font-extralight my-12",children:[o.jsx("p",{className:"text-center text-xl ",children:"Thank You ðŸŽ‰"}),o.jsxs("p",{className:"text-center font-normal text-black py-4 dark:text-white",children:[o.jsx("strong",{children:localStorage.getItem("fname")})," for subscribing to our"," ",o.jsx("strong",{children:localStorage.getItem("plan")})," Plan."," "]})]})};export{d as default};
