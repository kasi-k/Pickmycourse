import{u as g,r as c,j as e,f as l,F as f,b as j,A as N}from"./index-uakTF4_L.js";const S=()=>{const i=g(),o=localStorage.getItem("user"),[a,p]=c.useState([]),[x,u]=c.useState("");c.useEffect(()=>{(async()=>{const t=N+`/api/getsubsbyid?user=${o}`;try{const n=await j.get(t);p(n.data.sub),console.log(n.data.sub)}catch(n){console.error("Error fetching subscriptions:",n)}})()},[o]);const m=()=>{i("/pricing")},r=a.length>0?a[a.length-1]:null,d=s=>{const t=new Date(s);return t.setDate(t.getDate()+30),t},h=s=>{u(s.target.value)},b=a.filter(s=>s.plan.toLowerCase().includes(x.toLowerCase()));return e.jsxs("div",{className:"mx-5 my-6 font-poppins font-extralight",children:[e.jsx("div",{className:"max-w-sm h-auto bg-black pt-2 my-5",children:r?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-2xl mx-5",children:"Active Subscription"}),e.jsxs("p",{className:"text-normal mx-5",children:["Subscription : ",r.plan]}),e.jsxs("p",{className:"text-normal mx-5",children:["Subscription Expiry :"," ",l(d(r.date))]}),e.jsxs("p",{className:"text-normal mx-5 mb-2",children:["No Of Courses : ",r.course]}),e.jsx("button",{className:"text-base bg-gradient-to-r from-[#3D03FA] to-[#A71CD2] w-full py-2",onClick:m,children:"Change / Upgrade Plan"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-2xl mx-5",children:"Active Subscription"}),e.jsx("p",{className:"text-normal mx-5",children:"Subscription : Free"}),e.jsx("p",{className:"text-normal mx-5 mb-2",children:"No Of Courses : 1"}),e.jsx("button",{className:"text-base bg-gradient-to-r from-[#3D03FA] to-[#A71CD2] w-full py-2",onClick:m,children:"Change / Upgrade Plan"})]})}),e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-3 my-2 mx-3",children:[e.jsx("p",{className:"text-lg font-normal",children:"Subscription History"}),e.jsxs("div",{className:"flex items-center gap-3 bg-white w-96 px-6 py-1.5 rounded-md mr-3",children:[e.jsx(f,{className:"text-black text-xl"}),e.jsx("input",{type:"text",placeholder:"Search By Date/ Plan Name",className:"bg-transparent w-full outline-none text-center font-extralight text-black",value:x,onChange:h})]})]}),e.jsx("hr",{className:"my-2"}),b.map((s,t)=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between mx-2 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col gap-0 .5",children:[e.jsxs("p",{className:"text-xl",children:["Subscription : ",s.plan]}),e.jsxs("p",{children:["Subscription Start Date : ",l(s.date)]}),e.jsxs("p",{children:["Subscription End Date :"," ",l(d(s.date))]}),e.jsxs("p",{children:["No Of Courses Generated : ",s.course]})]}),e.jsx("div",{children:e.jsx("button",{className:"text-base bg-gradient-to-r from-[#3D03FA] to-[#A71CD2] w-48 py-2 my-5 font-normal",onClick:()=>i("/invoice",{state:{subId:s._id}}),children:"View Invoice"})})]},t),e.jsx("hr",{className:"my-3"})]}))]})};export{S as default};
